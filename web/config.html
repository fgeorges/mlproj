<!DOCTYPE html>
<html>
  <head>
    <title>mlproj - Config</title>

    <!-- CSS stylesheets -->
    <link href="css/bootstrap.css"  rel="stylesheet" type="text/css" />
    <link href="css/clean-blog.css" rel="stylesheet" type="text/css" />

    <!-- fonts -->
    <link href="css/font-awesome.css" rel="stylesheet" type="text/css" />
    <link href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" rel="stylesheet" type="text/css" />
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css" />
  </head>
  <body>

    <!-- Navigation -->
    <nav class="navbar navbar-default navbar-custom navbar-fixed-top" id="navbar">
      <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
            <span class="sr-only">Toggle navigation</span>
            Menu <i class="fa fa-bars"></i>
          </button>
          <a class="navbar-left" href="./" style="margin-top: 15px;">
            <img src="images/package-icon.png" style="height: 33px;" />
          </a>
        </div>
        <!-- the menu items -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
          <ul class="nav navbar-nav navbar-right">
            <li><a href="./">Introduction</a></li>
            <li><a href="start">Get started</a></li>
            <li><a href="commands">Commands</a></li>
            <li><a href="projects">Projects</a></li>
            <li><a href="environments">Environments</a></li>
            <li><a href="config">Config</a></li>
          </ul>
        </div>
      </div>
    </nav>

    <article>
      <div class="container">
        <div class="row">
          <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">

            <h1>Config</h1>
            <p>
              The `mlproj` command itself can be configured in various ways.  It looks in
              a few different config files, so you can maintain some pieces of
              configuration where it makes more sense (at the global level, in a specific
              project, or even in a specific environment).
            </p>
            <p>
              The first section below describes that general mechanism and the different
              files involved.  The subsequent sections document soecific pieces of
              configuration.  All sections on this page are:
            </p>
            <ul>
              <li><a href="#files">Files</a></li>
              <li><a href="#connect">Connection</a></li>
              <li><a href="#mlcp">MLCP</a></li>
            </ul>
            <p>
              This page is about configuring the `mlproj` command as a whole.  There are
              dedicated pages about "configuring" a specific <a href="projects">project</a>
              or its <a href="environments">environments</a>.
            </p>

            <a class="anchor" id="files"></a>
            <h3>Files</h3>
            <p>
              There are three different places where a piece of configuration can be
              saved.  At the "global" level (in the user's home directory), at the current
              project level, or in one of its specific environments.
            </p>
            <p>
              The most specific file "wins" (first the environment used, then the project,
              then the global config file):
            </p>
            <ul>
              <li><code>xproject/mlenvs/{environ}.json</code></li>
              <li><code>xproject/mlproj.json</code></li>
              <li><code>~/.mlproj.json</code></li>
              <li><code>~/mlproj.json</code></li>
            </ul>
            <p>
              Note that the config fine in the user home directory can have or not a dot
              as first character in its name (<code>.mlproj.json</code>
              versus <code>mlproj.json</code>).  The one with a dot is the idiomatic name,
              whilst the one with no dot is supported for platforms where it is hard to
              create a file with such a name.
            </p>

            <a class="anchor" id="connect"></a>
            <h3>Connection</h3>
            <p>
              You can set the default connection credentials to use in the user
              configuration file, by using the object <code>connect</code> (like in the
              environment files themselves):
            </p>
            <pre>
{
   "mlproj": {
      "connect": {
         "host": "myvm",
         "user": "admin"
      }
   }
}</pre>
            <p>
              These credentials (host, user and/or password) will be used only if they are
              not set on the command line nor in the environment file.
            </p>

            <a class="anchor" id="mlcp"></a>
            <h3>MLCP</h3>
            <p>
              The MarkLogic <a href="http://developer.marklogic.com/products/mlcp">Content
              Pump</a> is a command line tool to load/extrcat content to/from MarkLogic
              databases.  Its interface, its option names, can sometimes be quite
              difficult to remember though.  When MLCP is enabled, <code>mlproj</code>
              will:
            </p>
            <ul>
              <li>use it for its own purposes (to deploy modules for instance, which is
              more efficient using MLCP)</li>
              <li>provide a simpler interface to load content, via the
              command <code>mlproj load</code></li>
              <li>provide a frontend to MLPC, via the command <code>mlproj mlcp</code>, so
              it automatically uses the connection info from the environment files</li>
            </ul>
            <p>
              To install MLCP:
            </p>
            <ul>
              <li>download
              the <a href="http://developer.marklogic.com/products/mlcp">latest
              binaries</a> (at the time of writing, labelled <code>Release 8.0.6.3
              binaries zip package</code>)</li>
              <li>unzip it somwehere (e.g. in <code>/usr/local/mlcp/</code> or
                in <code>~/mlcp/</code>)</li>
              <li>add the following to <code>~/.mlproj.json</code> (or in your project or
              environment files):
            </ul>
            <pre>
{
   "mlproj": {
      "config": {
         "mlcp": {
            "home": "/usr/local/mlcp/mlcp-8.0.6.3/"
         }
      }
   }
}</pre>
            <p>
              Instead of <code>home</code>, you can use <code>bin</code> to point straight
              at the MLCP script (the BATCH or Shell script itself).
            </p>

          </div>
        </div>
      </div>
    </article>

    <!-- JS libraries -->
    <script src="js/jquery.js"></script>
    <script src="js/bootstrap.js"></script>
    <script src="js/clean-blog.js"></script>

  </body>
</html>
